/**
 * van11y-accessible-modal-window-aria - ES2015 accessible modal window system, using ARIA (compatible IE9+ when transpiled)
 * @version v2.3.0
 * @link https://van11y.net/accessible-modal/
 * @license MIT : https://github.com/nico3333fr/van11y-accessible-modal-window-aria/blob/master/LICENSE
 */
"use strict";!function(t){function e(t,e){for("string"==typeof e&&(e=document.createElement(e)),t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}function a(t){t.parentNode.removeChild(t)}var o="js-modal",l="label_modal_",d="modal",n="data-modal-background-click",i="data-modal-prefix-class",r="data-modal-text",s="data-modal-content-id",c="data-modal-title",u="data-modal-focus-toid",m="data-modal-close-text",b="data-modal-close-title",f="data-modal-close-img",g="dialog",v="modal-close",A="js-modal-close",p="js-modal-close",C="data-content-back-id",h="data-focus-back",k="modal__wrapper",y="modal__content",x="js-modal-content",I="modal__closeimg",L="modal-close__text",T="modal-title",E="modal-title",j="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",B="js-modal-page",M="js-modal",_="js-modal-overlay",P="modal-overlay",w="Close modal",D="data-background-click",H="invisible",N="no-scroll",S="role",q="open",F="aria-labelledby",O="aria-hidden",R="aria-haspopup",$="dialog",K=function(e){return t.getElementById(e)},V=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},W=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},z=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},G=function(t,e){for(var a=!1,o=t.parentNode;o&&a===!1;)z(o,e)===!0?a=!0:o=o.parentNode;return a===!0?o.getAttribute("id"):""},J=function(t){var e=_,a=t.text||w,o=t.prefixClass+P,l="disabled"===t.backgroundEnabled?"disabled":"enabled";return'<span\n                  id="'+e+'"\n                  class="'+o+'"\n                  '+D+'="'+l+'"\n                  title="'+a+'"\n                  >\n                  <span class="'+H+'">'+a+"</span>\n                </span>"},Q=function(t){var e=M,a=t.modalPrefixClass+d,o=t.modalPrefixClass+k,l=t.modalPrefixClass+v,n=t.modalCloseImgPath?'<img src="'+t.modalCloseImgPath+'" alt="'+t.modalCloseText+'" class="'+I+'" />':'<span class="'+L+'">\n                                        '+t.modalCloseText+"\n                                       </span>",i=t.modalPrefixClass+y,r=t.modalPrefixClass+E,s=""!==t.modalTitle?'<h1 id="'+T+'" class="'+r+'">\n                                        '+t.modalTitle+"\n                                       </h1>":"",c='<button type="button" class="'+p+" "+l+'" id="'+A+'" title="'+t.modalCloseTitle+'" '+C+'="'+t.modalContentId+'" '+h+'="'+t.modalFocusBackId+'">\n                             '+n+"\n                            </button>",u=t.modalText;if(""===u&&t.modalContentId){var m=K(t.modalContentId);m&&(u='<div id="'+x+'">\n                            '+m.innerHTML+"\n                           </div",m.innerHTML="")}return'<dialog id="'+e+'" class="'+a+'" '+S+'="'+g+'" '+q+" "+F+'="'+T+'">\n                  <div role="document" class="'+o+'">\n                    '+c+'\n                    <div class="'+i+'">\n                      '+s+"\n                      "+u+"\n                    </div>\n                  </div>\n                </dialog>"},U=function(t){if(a(t.modal),a(t.overlay),""!==t.contentBackId){var e=K(t.contentBackId);e&&(e.innerHTML=t.modalContent)}if(t.modalFocusBackId){var o=K(t.modalFocusBackId);o&&o.focus()}},X=function(){var e=arguments.length<=0||void 0===arguments[0]?t:arguments[0];return[].slice.call(e.querySelectorAll("."+o))},Y=function(a){var d=arguments.length<=1||void 0===arguments[1]||arguments[1];X(a).forEach(function(a){var o=Math.random().toString(32).slice(2,12),d=K(B),n=t.querySelector("body");if(a.setAttribute("id",l+o),a.setAttribute(R,$),null===d||0===d.length){var i=t.createElement("DIV");i.setAttribute("id",B),e(n,i)}}),d&&["click","keydown"].forEach(function(e){t.body.addEventListener(e,function(a){var l=G(a.target,o);if((z(a.target,o)===!0||""!==l)&&"click"===e){var d=t.querySelector("body"),g=""!==l?K(l):a.target,v=g.hasAttribute(i)===!0?g.getAttribute(i)+"-":"",k=g.hasAttribute(r)===!0?g.getAttribute(r):"",y=g.hasAttribute(s)===!0?g.getAttribute(s):"",I=g.hasAttribute(c)===!0?g.getAttribute(c):"",L=g.hasAttribute(m)===!0?g.getAttribute(m):w,T=g.hasAttribute(b)===!0?g.getAttribute(b):L,E=g.hasAttribute(f)===!0?g.getAttribute(f):"",P=g.hasAttribute(n)===!0?g.getAttribute(n):"",H=g.hasAttribute(u)===!0?g.getAttribute(u):"",S=K(B);d.insertAdjacentHTML("beforeEnd",J({text:T,backgroundEnabled:P,prefixClass:v})),d.insertAdjacentHTML("beforeEnd",Q({modalText:k,modalPrefixClass:v,backgroundEnabled:y,modalTitle:I,modalCloseText:L,modalCloseTitle:T,modalCloseImgPath:E,modalContentId:y,modalFocusBackId:g.getAttribute("id")})),S.setAttribute(O,"true"),V(d,N);var q=K(A);if(""!==H){var F=K(H);F?F.focus():q.focus()}else q.focus();a.preventDefault()}var R=G(a.target,p);if((a.target.getAttribute("id")===A||""!==R||a.target.getAttribute("id")===_||z(a.target,p)===!0)&&"click"===e){var d=t.querySelector("body"),S=K(B),$=K(M),X=K(x)?K(x).innerHTML:"",Y=K(_),Z=K(A),tt=Z.getAttribute(h),et=Z.getAttribute(C),P=Y.getAttribute(D);a.target.getAttribute("id")===_&&"disabled"===P||(U({modal:$,modalContent:X,overlay:Y,modalFocusBackId:tt,contentBackId:et,backgroundEnabled:P,fromId:a.target.getAttribute("id")}),S.removeAttribute(O),W(d,N))}if(K(M)&&"keydown"===e){var d=t.querySelector("body"),S=K(B),$=K(M),X=K(x)?K(x).innerHTML:"",Y=K(_),Z=K(A),tt=Z.getAttribute(h),et=Z.getAttribute(C),at=[].slice.call($.querySelectorAll(j));27===a.keyCode&&(U({modal:$,modalContent:X,overlay:Y,modalFocusBackId:tt,contentBackId:et}),S.removeAttribute(O),W(d,N)),9===a.keyCode&&at.indexOf(a.target)>=0&&(a.shiftKey?a.target===at[0]&&(at[at.length-1].focus(),a.preventDefault()):a.target===at[at.length-1]&&(at[0].focus(),a.preventDefault())),9===a.keyCode&&at.indexOf(a.target)===-1&&(a.preventDefault(),at[0].focus())}},!0)})},Z=function tt(){Y(),document.removeEventListener("DOMContentLoaded",tt)};document.addEventListener("DOMContentLoaded",Z),window.van11yAccessibleModalWindowAria=Y}(document);