/**
 * van11y-accessible-modal-window-aria - ES2015 accessible modal window system, using ARIA (compatible IE9+ when transpiled)
 * @version v2.2.0
 * @link https://van11y.net/accessible-modal/
 * @license MIT : https://github.com/nico3333fr/van11y-accessible-modal-window-aria/blob/master/LICENSE
 */
"use strict";!function(t){function e(t,e){for("string"==typeof e&&(e=document.createElement(e)),t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}function a(t){t.parentNode.removeChild(t)}var o="js-modal",l="label_modal_",d="modal",n="data-modal-background-click",i="data-modal-prefix-class",r="data-modal-text",s="data-modal-content-id",c="data-modal-title",u="data-modal-close-text",m="data-modal-close-title",b="data-modal-close-img",g="dialog",f="modal-close",v="js-modal-close",A="js-modal-close",p="data-content-back-id",C="data-focus-back",h="modal__wrapper",k="modal__content",y="js-modal-content",x="modal__closeimg",I="modal-close__text",L="modal-title",T="modal-title",E="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",j="js-modal-page",B="js-modal",M="js-modal-overlay",_="modal-overlay",P="Close modal",w="data-background-click",D="invisible",H="no-scroll",N="role",S="open",q="aria-labelledby",F="aria-hidden",O="aria-haspopup",R="dialog",$=function(e){return t.getElementById(e)},K=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},V=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},W=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},z=function(t,e){for(var a=!1,o=t.parentNode;o&&a===!1;)W(o,e)===!0?a=!0:o=o.parentNode;return a===!0?o.getAttribute("id"):""},G=function(t){var e=M,a=t.text||P,o=t.prefixClass+_,l="disabled"===t.backgroundEnabled?"disabled":"enabled";return'<span\n                  id="'+e+'"\n                  class="'+o+'"\n                  '+w+'="'+l+'"\n                  title="'+a+'"\n                  >\n                  <span class="'+D+'">'+a+"</span>\n                </span>"},J=function(t){var e=B,a=t.modalPrefixClass+d,o=t.modalPrefixClass+h,l=t.modalPrefixClass+f,n=t.modalCloseImgPath?'<img src="'+t.modalCloseImgPath+'" alt="'+t.modalCloseText+'" class="'+x+'" />':'<span class="'+I+'">\n                                        '+t.modalCloseText+"\n                                       </span>",i=t.modalPrefixClass+k,r=t.modalPrefixClass+T,s=""!==t.modalTitle?'<h1 id="'+L+'" class="'+r+'">\n                                        '+t.modalTitle+"\n                                       </h1>":"",c='<button type="button" class="'+A+" "+l+'" id="'+v+'" title="'+t.modalCloseTitle+'" '+p+'="'+t.modalContentId+'" '+C+'="'+t.modalFocusBackId+'">\n                             '+n+"\n                            </button>",u=t.modalText;if(""===u&&t.modalContentId){var m=$(t.modalContentId);m&&(u='<div id="'+y+'">\n                            '+m.innerHTML+"\n                           </div",m.innerHTML="")}return'<dialog id="'+e+'" class="'+a+'" '+N+'="'+g+'" '+S+" "+q+'="'+L+'">\n                  <div role="document" class="'+o+'">\n                    '+c+'\n                    <div class="'+i+'">\n                      '+s+"\n                      "+u+"\n                    </div>\n                  </div>\n                </dialog>"},Q=function(t){if(a(t.modal),a(t.overlay),""!==t.contentBackId){var e=$(t.contentBackId);e&&(e.innerHTML=t.modalContent)}if(t.modalFocusBackId){var o=$(t.modalFocusBackId);o&&o.focus()}},U=function(){var e=arguments.length<=0||void 0===arguments[0]?t:arguments[0];return[].slice.call(e.querySelectorAll("."+o))},X=function(a){U(a).forEach(function(a){var o=Math.random().toString(32).slice(2,12),d=$(j),n=t.querySelector("body");if(a.setAttribute("id",l+o),a.setAttribute(O,R),null===d||0===d.length){var i=t.createElement("DIV");i.setAttribute("id",j),e(n,i)}})};["click","keydown"].forEach(function(e){t.body.addEventListener(e,function(a){var l=z(a.target,o);if((W(a.target,o)===!0||""!==l)&&"click"===e){var d=t.querySelector("body"),g=""!==l?$(l):a.target,f=g.hasAttribute(i)===!0?g.getAttribute(i)+"-":"",h=g.hasAttribute(r)===!0?g.getAttribute(r):"",k=g.hasAttribute(s)===!0?g.getAttribute(s):"",x=g.hasAttribute(c)===!0?g.getAttribute(c):"",I=g.hasAttribute(u)===!0?g.getAttribute(u):P,L=g.hasAttribute(m)===!0?g.getAttribute(m):I,T=g.hasAttribute(b)===!0?g.getAttribute(b):"",_=g.hasAttribute(n)===!0?g.getAttribute(n):"",D=$(j);d.insertAdjacentHTML("beforeEnd",G({text:L,backgroundEnabled:_,prefixClass:f})),d.insertAdjacentHTML("beforeEnd",J({modalText:h,modalPrefixClass:f,backgroundEnabled:k,modalTitle:x,modalCloseText:I,modalCloseTitle:L,modalCloseImgPath:T,modalContentId:k,modalFocusBackId:g.getAttribute("id")})),D.setAttribute(F,"true"),K(d,H);var N=$(v);N.focus(),a.preventDefault()}var S=z(a.target,A);if((a.target.getAttribute("id")===v||""!==S||a.target.getAttribute("id")===M||W(a.target,A)===!0)&&"click"===e){var d=t.querySelector("body"),D=$(j),q=$(B),O=$(y)?$(y).innerHTML:"",R=$(M),U=$(v),X=U.getAttribute(C),Y=U.getAttribute(p),_=R.getAttribute(w);a.target.getAttribute("id")===M&&"disabled"===_||(Q({modal:q,modalContent:O,overlay:R,modalFocusBackId:X,contentBackId:Y,backgroundEnabled:_,fromId:a.target.getAttribute("id")}),D.removeAttribute(F),V(d,H))}if($(B)&&"keydown"===e){var d=t.querySelector("body"),D=$(j),q=$(B),O=$(y)?$(y).innerHTML:"",R=$(M),U=$(v),X=U.getAttribute(C),Y=U.getAttribute(p),Z=[].slice.call(q.querySelectorAll(E));27===a.keyCode&&(Q({modal:q,modalContent:O,overlay:R,modalFocusBackId:X,contentBackId:Y}),D.removeAttribute(F),V(d,H)),9===a.keyCode&&Z.indexOf(a.target)>=0&&(a.shiftKey?a.target===Z[0]&&(Z[Z.length-1].focus(),a.preventDefault()):a.target===Z[Z.length-1]&&(Z[0].focus(),a.preventDefault())),9===a.keyCode&&Z.indexOf(a.target)===-1&&(a.preventDefault(),Z[0].focus())}},!0)});var Y=function Z(){X(),document.removeEventListener("DOMContentLoaded",Z)};document.addEventListener("DOMContentLoaded",Y),window.van11yAccessibleModalWindowAria=X}(document);